{"createdAt":"2025-05-07T23:57:32.732Z","updatedAt":"2025-05-12T01:29:59.950Z","id":"YPjuxIr7Y2fhyM3G","name":"Image generation","active":false,"nodes":[{"parameters":{"resource":"image","prompt":"A cute cat eating a dinosaur","options":{"dalleQuality":"hd","size":"1792x1024"}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[240,-80],"id":"3e12a6aa-3aaf-49c0-81df-b504df0b424a","name":"OpenAI","credentials":{"openAiApi":{"id":"JfMKe6UVIbmHqonl","name":"OpenAi account"}}},{"parameters":{"operation":"toBinary","sourceProperty":"data[0].b64_json","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[1520,620],"id":"dcaf31e6-491c-4efb-95a3-237b3043ecfa","name":"Convert to File"},{"parameters":{"formTitle":"Generate Image","formFields":{"values":[{"fieldLabel":"What would you like","fieldType":"dropdown","fieldOptions":{"values":[{"option":"Create a LinkedIn Post"},{"option":"Create a Youtube Script"},{"option":"Modify my Product Image"}]},"requiredField":true},{"fieldLabel":"What would you like done?","requiredField":true},{"fieldLabel":"Upload file","fieldType":"file"}]},"options":{"appendAttribution":false}},"type":"n8n-nodes-base.formTrigger","typeVersion":2.2,"position":[-180,480],"id":"eb53717b-ba07-42ec-8e52-246a1e1ca9bf","name":"On form submission","webhookId":"__REDACTED_WEBHOOK_ID__"},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $json[\"What would you like\"] }}","rightValue":"Modify my Product Image","operator":{"type":"string","operation":"notEquals"},"id":"cb114fbd-6f15-40ff-bb70-1916ef420fb5"}],"combinator":"and"},"renameOutput":true,"outputKey":"Generate New Image"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"2a0da1ff-efa1-40ed-82b3-22551e0d961f","leftValue":"={{ $json[\"What would you like\"] }}","rightValue":"Modify my Product Image","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Edit Existing Image"}]},"options":{}},"type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[-20,480],"id":"e24f05a3-44ff-45f4-b548-d60b5a544f33","name":"Switch1"},{"parameters":{"content":"## Team 1 - Generate New Image","height":420,"width":1720,"color":4},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[180,100],"id":"56aabe9c-7759-4e93-ac02-c108730df1fc","name":"Sticky Note"},{"parameters":{"content":"## Team 2 - Edit Existing Image","height":420,"width":1720,"color":5},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[180,540],"id":"ad3c3f6e-68f3-4903-8caa-7c9cbf635549","name":"Sticky Note1"},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $json[\"What would you like\"] }}","rightValue":"Create a LinkedIn Post","operator":{"type":"string","operation":"equals"},"id":"80e51c68-6b2f-4e09-9303-229e0e213ef8"}],"combinator":"and"},"renameOutput":true,"outputKey":"LinkedIn"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"7c174ad9-bbb7-44ab-81ee-63a91cd9f4da","leftValue":"={{ $json[\"What would you like\"] }}","rightValue":"Create a Youtube Script","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Youtube"}]},"options":{}},"type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[260,240],"id":"57f10755-edc2-477c-801c-16ebc2d0d12a","name":"Switch2"},{"parameters":{"model":{"__rl":true,"value":"gpt-4.1","mode":"list","cachedResultName":"gpt-4.1"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[420,820],"id":"53af874e-a86a-4644-8543-2028036713f2","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"JfMKe6UVIbmHqonl","name":"OpenAi account"}}},{"parameters":{"operation":"toBinary","sourceProperty":"data[0].b64_json","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[1520,220],"id":"89096ac3-101b-4487-9266-fe1327f354dd","name":"Convert to File1"},{"parameters":{"model":{"__rl":true,"value":"gpt-4.1","mode":"list","cachedResultName":"gpt-4.1"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[720,400],"id":"dea995a6-c018-4dba-a143-4b5fb1f26a35","name":"OpenAI Chat Model1","credentials":{"openAiApi":{"id":"JfMKe6UVIbmHqonl","name":"OpenAi account"}}},{"parameters":{"jsCode":"let raw = $input.first().json.output;\n\n// Step 1: Try to detect and fix outer wrapping\n// Remove any markdown-style wrapping (triple backticks or extra quotes)\nraw = raw.trim();\nif (raw.startsWith('```json') || raw.startsWith('```')) {\n  raw = raw.replace(/```json\\\\n?|```/gi, '').trim();\n}\n\n// Step 2: Parse as JSON\nlet parsed;\ntry {\n  parsed = JSON.parse(raw);\n} catch (e) {\n  throw new Error('❌ JSON parse failed: ' + e.message + '\\\\n\\\\nContent:\\\\n' + raw);\n}\n\n// Step 3: Return result\nreturn [\n  {\n    json: {\n      copy: parsed.copy || '',\n      prompt: parsed.prompt || ''\n    }\n  }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1140,220],"id":"9b6ba9a8-49a5-476b-af13-f0de97de8933","name":"Code"},{"parameters":{"toolDescription":"Use this tool to search the web","method":"POST","url":"https://api.openai.com/v1/responses","authentication":"predefinedCredentialType","nodeCredentialType":"openAiApi","sendHeaders":true,"parametersHeaders":{"values":[{"name":"Content-Type","valueProvider":"fieldValue","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"{\n    \"model\": \"gpt-4o\",\n    \"tools\": [{ \"type\": \"web_search_preview\" }],\n    \"input\": \"{web_search_question}\"\n  }","placeholderDefinitions":{"values":[{"name":"{web_search_question}","description":"The question to search"}]}},"type":"@n8n/n8n-nodes-langchain.toolHttpRequest","typeVersion":1.1,"position":[1040,380],"id":"ced27269-8288-49d5-ab51-5fb69dcc6c1a","name":"web_search","credentials":{"openAiApi":{"id":"JfMKe6UVIbmHqonl","name":"OpenAi account"}}},{"parameters":{"sendTo":"__REDACTED_EMAIL__","subject":"Your Image Is Ready","emailType":"text","message":"={{ $('Code').item.json.copy }}","options":{"appendAttribution":false,"attachmentsUi":{"attachmentsBinary":[{}]}}},"type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[1700,220],"id":"3b20cdee-b09f-4936-9001-343f86e3e5da","name":"Gmail","webhookId":"__REDACTED_WEBHOOK_ID__","credentials":{"gmailOAuth2":{"id":"xMHeT1kgMTyOZ8sL","name":"Gmail account"}}},{"parameters":{"assignments":{"assignments":[{"id":"905099a2-860e-47df-84e0-fa37a71d5736","name":"prompt","value":"You are a **YouTube Video Generator Agent**.\n\nYour responsibilities:\n\n1. **Research the provided topic** using the `web_search` tool. Use credible sources and include direct links to those sources in your output.\n2. **Generate a high-engagement YouTube video script** that hooks viewers early, delivers real value, and includes relevant facts, stats, or storytelling. It should be concise, clear, and optimized for retention.\n3. **Craft a thumbnail prompt** to describe a compelling visual that supports the video topic. Focus on emotion, intrigue, and visual clarity. Do **not** include image size or formatting syntax.\n\n### Output Format:\nRespond with a JSON object in the following format:\n\n{\n  \"copy\": \"Full YouTube video script. Include a hook, intro, valuable content, and a call to action.\",\n  \"prompt\": \"A visual description for a YouTube thumbnail that captures attention and reflects the video's core idea.\"\n}\n\nEnsure all links referenced in the script are embedded as spoken content (e.g. “According to a report from...”) and listed in the video description if needed. Avoid fluff—deliver real value in both visuals and narrative.\n\nNote: The thumbnail prompt must include a catchy phrase text overlay, not just an image.\n","type":"string"},{"id":"703e0a3d-d8b5-4eda-b30a-34cb4e287aa9","name":"size","value":"1536x1024","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[440,320],"id":"d0d3a577-2a2b-4da0-b0be-12d0a7d8406e","name":"Set Youtube Agent","alwaysOutputData":true,"onError":"continueRegularOutput"},{"parameters":{"assignments":{"assignments":[{"id":"f2718e87-def3-4966-b45f-278393b54fb3","name":"prompt","value":"You are a **LinkedIn Post Generator Agent**.\n\nYour responsibilities:\n\n1. **Research the provided topic** using the `web_search` tool. Use credible sources and include direct links to those sources in your output.\n2. **Generate a professional, engaging LinkedIn post** that shares insights, data, or commentary on the topic. The post should be suitable for an audience of professionals, business leaders, or industry peers.\n3. **Craft a detailed image prompt** to describe a visual that would pair well with the post. Focus on illustrating concepts, trends, or statistics mentioned in the post. Do not include any image size or resolution parameters in the prompt.\n\n### Output Format:\nRespond with a JSON object in the following format:\n\n{\n  \"copy\": \"Full LinkedIn post copy with inline links like [Joby Aviation](https://apnews.com/article/97a051ba488c31dd3d5042b2daeff722). Make it value-rich, professional, and formatted for LinkedIn.\",\n  \"prompt\": \"A visual description prompt to generate a relevant image. Should describe the key concepts in the post without including formatting, image size, or tool-specific syntax.\"\n}\n\n\nEnsure all links are current, relevant, and trustworthy. Avoid fluff—deliver real value.","type":"string"},{"id":"cff58b30-e0da-409e-99c6-e864ba56f469","name":"size","value":"1024x1024","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[440,140],"id":"30322622-5c34-479d-b955-d138e1799a4d","name":"Set LinkedIn Agent","alwaysOutputData":true,"onError":"continueRegularOutput"},{"parameters":{"toolDescription":"Use this tool to search the web","method":"POST","url":"https://api.openai.com/v1/responses","authentication":"predefinedCredentialType","nodeCredentialType":"openAiApi","sendHeaders":true,"parametersHeaders":{"values":[{"name":"Content-Type","valueProvider":"fieldValue","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"{\n    \"model\": \"gpt-4o\",\n    \"tools\": [{ \"type\": \"web_search_preview\" }],\n    \"input\": \"{web_search_question}\"\n  }","placeholderDefinitions":{"values":[{"name":"{web_search_question}","description":"The question to search"}]}},"type":"@n8n/n8n-nodes-langchain.toolHttpRequest","typeVersion":1.1,"position":[660,820],"id":"340c3c21-a2e2-4ae7-aa47-94bd07674687","name":"web_search1","credentials":{"openAiApi":{"id":"JfMKe6UVIbmHqonl","name":"OpenAi account"}}},{"parameters":{"jsCode":"const raw = $input.first().json.output;\n\n// Step 1: Clean markdown formatting if it's present\nlet cleaned = raw.replace(/```json\\\\n?|```/gi, '').trim();\n\n// Step 2: Parse JSON\nlet parsed;\ntry {\n  parsed = JSON.parse(cleaned);\n} catch (e) {\n  throw new Error('❌ Failed to parse image edit prompt JSON: ' + e.message + '\\\\n\\\\nRaw content:\\\\n' + cleaned);\n}\n\n// Step 3: Return only the prompt\nreturn [\n  {\n    json: {\n      prompt: parsed.prompt || ''\n    }\n  }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[760,640],"id":"aaf37637-9f79-4cd5-95cc-5450fc8f2dbb","name":"Code1"},{"parameters":{"promptType":"define","text":"=Description of image that was supplied: <description>{{ $json.content }}</description>\nThe User's request of what to modify: <modify>{{ $('Switch1').item.json['What would you like done?'] }}</modify>","options":{"systemMessage":"You are an **Image Modification Agent**.\n\nYour task is to receive a short instruction from the user about how they want an image changed or enhanced. You also receive a short description of the image they want to edit. You can use the `web_search1` tool to gather context or examples if needed.\n\nYour job is to translate the user's request into a clear, detailed **image modification prompt**. This should describe exactly what the edit should do, how it should look, or what should be added/removed/adjusted.\n\n### Output Format:\nRespond with a JSON object containing a single key:\n\n\n{\n  \"prompt\": \"A descriptive instruction that can be used to modify or edit an image accurately.\"\n}\n\n\nAvoid unnecessary words. Be descriptive, specific, and accurate.\nNote: Where possible, make the text on thumbnails prominent like a title."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.8,"position":[440,640],"id":"79dc4a45-bee2-4137-bc94-6cc51382a1c6","name":"Image Editor Agent"},{"parameters":{"promptType":"define","text":"={{ $('On form submission').item.json[\"What would you like done?\"] }}","options":{"systemMessage":"={{ $json.prompt }}"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.8,"position":[800,220],"id":"1fc8d547-e208-4e2c-8366-10a71e9a49e7","name":"AI Content Agent"},{"parameters":{},"type":"n8n-nodes-base.merge","typeVersion":3.1,"position":[940,580],"id":"bcbe642b-a190-4161-a764-ba17cc3b07ec","name":"Merge"},{"parameters":{"jsCode":"const mergedItems = $input.all(); // Get both items\n\n// Flatten both JSON objects into one\nlet finalJson = {};\nlet finalBinary = {};\n\n// Loop through and merge their JSON + Binary data\nfor (const item of mergedItems) {\n  Object.assign(finalJson, item.json);\n  if (item.binary) {\n    Object.assign(finalBinary, item.binary);\n  }\n}\n\nreturn [\n  {\n    json: finalJson,\n    binary: finalBinary\n  }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1140,620],"id":"b03e9983-ac8c-4131-9d27-23965f5a75ef","name":"Code2"},{"parameters":{"sendTo":"__REDACTED_EMAIL__","subject":"Your Image Is Ready","emailType":"text","message":"=Enjoy!","options":{"appendAttribution":false,"attachmentsUi":{"attachmentsBinary":[{}]}}},"type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[1700,620],"id":"ae7d0e5d-9701-459c-bc1e-a7efd1fc8ebb","name":"Gmail1","webhookId":"__REDACTED_WEBHOOK_ID__","credentials":{"gmailOAuth2":{"id":"xMHeT1kgMTyOZ8sL","name":"Gmail account"}}},{"parameters":{"content":"## Request Form","height":860,"width":380},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-220,100],"id":"b488744d-c296-40de-8463-c5e1bfb98f57","name":"Sticky Note2"},{"parameters":{"method":"POST","url":"https://api.openai.com/v1/images/generations","authentication":"predefinedCredentialType","nodeCredentialType":"openAiApi","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"model","value":"gpt-image-1"},{"name":"prompt","value":"={{ $json.prompt }}"},{"name":"size","value":"={{ $('Merge1').item.json.size }}"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1320,220],"id":"86e62399-d473-4835-a8e0-21babb25db32","name":"Generate Image","credentials":{"openAiApi":{"id":"JfMKe6UVIbmHqonl","name":"OpenAi account"}}},{"parameters":{"method":"POST","url":"https://api.openai.com/v1/images/edits","authentication":"predefinedCredentialType","nodeCredentialType":"openAiApi","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{"name":"model","value":"gpt-image-1"},{"name":"prompt","value":"={{ $json.prompt }}"},{"parameterType":"formBinaryData","name":"image[]","inputDataFieldName":"=Upload_file"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1320,620],"id":"b9a9f324-a1c4-42f5-bd71-cb9cfda5c955","name":"Edit Image","credentials":{"openAiApi":{"id":"JfMKe6UVIbmHqonl","name":"OpenAi account"}}},{"parameters":{},"type":"n8n-nodes-base.merge","typeVersion":3.1,"position":[640,220],"id":"93c34473-04bb-43a6-819a-e17a4ffc0864","name":"Merge1"},{"parameters":{"resource":"image","operation":"analyze","modelId":{"__rl":true,"value":"gpt-4o","mode":"list","cachedResultName":"GPT-4O"},"inputType":"base64","binaryPropertyName":"Upload_file","options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[260,640],"id":"de453335-f6fa-4ae2-bd31-3810fc3e800c","name":"OpenAI1","credentials":{"openAiApi":{"id":"JfMKe6UVIbmHqonl","name":"OpenAi account"}}}],"connections":{"Convert to File":{"main":[[{"node":"Gmail1","type":"main","index":0}]]},"On form submission":{"main":[[{"node":"Switch1","type":"main","index":0}]]},"Switch1":{"main":[[{"node":"Switch2","type":"main","index":0}],[{"node":"OpenAI1","type":"main","index":0},{"node":"Merge","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"Image Editor Agent","type":"ai_languageModel","index":0}]]},"Switch2":{"main":[[{"node":"Set LinkedIn Agent","type":"main","index":0}],[{"node":"Set Youtube Agent","type":"main","index":0}]]},"Convert to File1":{"main":[[{"node":"Gmail","type":"main","index":0}]]},"OpenAI Chat Model1":{"ai_languageModel":[[{"node":"AI Content Agent","type":"ai_languageModel","index":0}]]},"Code":{"main":[[{"node":"Generate Image","type":"main","index":0}]]},"web_search":{"ai_tool":[[{"node":"AI Content Agent","type":"ai_tool","index":0}]]},"Set Youtube Agent":{"main":[[{"node":"Merge1","type":"main","index":1}]]},"Set LinkedIn Agent":{"main":[[{"node":"Merge1","type":"main","index":0}]]},"web_search1":{"ai_tool":[[{"node":"Image Editor Agent","type":"ai_tool","index":0}]]},"Code1":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Image Editor Agent":{"main":[[{"node":"Code1","type":"main","index":0}]]},"AI Content Agent":{"main":[[{"node":"Code","type":"main","index":0}]]},"Merge":{"main":[[{"node":"Code2","type":"main","index":0}]]},"Code2":{"main":[[{"node":"Edit Image","type":"main","index":0}]]},"Generate Image":{"main":[[{"node":"Convert to File1","type":"main","index":0}]]},"Edit Image":{"main":[[{"node":"Convert to File","type":"main","index":0}]]},"Merge1":{"main":[[{"node":"AI Content Agent","type":"main","index":0}]]},"OpenAI1":{"main":[[{"node":"Image Editor Agent","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"c1c84bbf-b6c6-43f8-b8ee-201c128ec9f9","triggerCount":1,"shared":[{"createdAt":"2025-05-07T23:57:32.732Z","updatedAt":"2025-05-07T23:57:32.732Z","role":"workflow:owner","workflowId":"YPjuxIr7Y2fhyM3G","projectId":"5QWv6f9mlxQ2M1LM","project":{"createdAt":"2025-05-04T14:25:57.130Z","updatedAt":"2025-05-04T14:27:28.535Z","id":"5QWv6f9mlxQ2M1LM","name":"Carolina Sarnevesht <carops67@gmail.com>","type":"personal","icon":null,"projectRelations":[{"createdAt":"2025-05-04T14:25:57.130Z","updatedAt":"2025-05-04T14:25:57.130Z","role":"project:personalOwner","userId":"3a296398-890d-494f-9a77-66b173c00981","projectId":"5QWv6f9mlxQ2M1LM","user":{"createdAt":"2025-05-04T14:25:55.814Z","updatedAt":"2025-05-04T16:56:19.160Z","id":"3a296398-890d-494f-9a77-66b173c00981","email":"carops67@gmail.com","firstName":"Carolina","lastName":"Sarnevesht","personalizationAnswers":null,"settings":{"userActivated":true,"easyAIWorkflowOnboarded":true,"firstSuccessfulWorkflowId":"RssROpqkXOm23GYL","userActivatedAt":1746377777269},"role":"global:owner","disabled":false,"mfaEnabled":false,"isPending":false,"isOwner":true}}]}}],"tags":[{"createdAt":"2025-05-09T19:52:19.405Z","updatedAt":"2025-05-09T19:52:19.405Z","id":"FyfpyAHMq9y6fz7r","name":"youtube"}]}